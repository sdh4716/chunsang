<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="BoardDAO">
	
	<insert id="insertBoard" parameterType="com.chunsang.pension.comm.dto.BoardDTO">
		/* BoardDAO.insertBoard 게시판 글 작성 */
		INSERT INTO 
			BOARD
			(
				  BOARD_ID
				, SEQ
				, TITLE
				, CONTENT
				, ATCH_FILE_ID
				, REG_DT
				, REG_ID
				, IMG_FILE_ID
			)
			VALUES
			(
				  #{boardId}
				, (SELECT(COALESCE(MAX(SB.SEQ), 0) + 1) AS SEQ FROM BOARD SB WHERE BOARD_ID = #{boardId})
				, #{title}
				, #{content}
				, #{atchFileId}
				, SYSDATE()
				, #{regId}
				, #{imgFileId}
			)
	</insert>
	
</mapper>